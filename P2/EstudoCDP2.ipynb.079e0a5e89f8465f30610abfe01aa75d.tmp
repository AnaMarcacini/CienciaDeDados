from scipy.stats import ttest_ind, ttest_rel, norm

_, p_valor_ind = ttest_ind(df['After'], df['Before'], alternative='less')
_, p_valor_rel = ttest_rel(df['After'], df['Before'], alternative='less')

print("Teste ind:", p_valor_ind)
print("Teste rel:", p_valor_rel)

sns.lineplot(x=np.linspace(-4,4,1000),y=norm.pdf(np.linspace(-4,4,1000)), color='blue', alpha=0.3)

plt.vlines(1-norm.ppf(p_valor_ind), ymin=0, ymax=0.5, colors='blue', linestyles='dashed',label='Teste ind',lw=0.5)
plt.vlines(1-norm.ppf(p_valor_rel), ymin=0, ymax=0.5, colors='red', linestyles='dashed',label='Teste rel',lw=0.5)
plt.vlines(1-norm.ppf(0.05), ymin=0, ymax=0.5, colors='k', label='Critical',lw=0.5)

plt.text(1-norm.ppf(p_valor_ind), 0.3,'Teste ind')
plt.text(1-norm.ppf(p_valor_rel), 0.4,'Teste rel')
plt.text(1-norm.ppf(0.05), 0.45,'$Z_c$')

# plt.legend(loc='upper left')
plt.title('Distribuição dos Tempos Antes e Depois')
plt.show()
