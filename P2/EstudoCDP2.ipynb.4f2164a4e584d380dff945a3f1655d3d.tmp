from scipy.stats import chi2_contingency

results = pd.DataFrame(columns=['Related','chi2','p-value','Dependent'])

for tipo in ['preference','challenger']:
  contingency_table = pd.crosstab(df['Gênero'], df[tipo])

  # display('Tabela de Contingência: ', contingency_table)
  # display(contingency_table)

  chi2, p_value, dof, expected = chi2_contingency(contingency_table)

  if p_value < 0.05:
      print(f"Rejeitamos a hipótese nula - Há evidências de que o gênero influencia em {tipo}. Chi-square: {chi2:.6f} p-value = {p_value:.6f}")
  else:
      print(f"Não rejeitamos a hipótese nula - Não há evidências de que o gênero influencia em {tipo}. Chi-square: {chi2:.6f} p-value = {p_value:.6f}")

  results.loc[len(results)] = [tipo,np.round(chi2,4),np.round(p_value,4),p_value < 0.05]

print()